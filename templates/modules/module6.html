{% extends "base.html" %}
{% block title %}Module 6 â€“ Real-Time Tracking{% endblock %}

{% block extra_head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='module6/style.css') }}">
{% endblock %}

{% block content %}
  <div class="page-head">
    <h1 class="h1">Module 6: Real-Time Tracking Demo</h1>
    <a class="btn ghost" href="{{ url_for('dashboard') }}">â† Back to Dashboard</a>
  </div>

  <p class="muted">
    Switch between ArUco marker-based tracking, markerless feature tracking (optical flow),
    and SAM2 segmentation playback.
  </p>

  <div class="card">
    <!-- Mode buttons -->
    <div class="m6-controls">
      <button class="btn" data-mode="marker">Marker-based</button>
      <button class="btn ghost" data-mode="markerless">Markerless</button>
      <button class="btn ghost" data-mode="sam2">SAM2 segmentation</button>
    </div>

    <p id="m6Status" class="muted" style="margin-top: 8px;">
      Select a mode to begin. Marker / Markerless will use your browser webcam.
    </p>

    <div class="m6-video-box">
      <!-- Hidden input video (still used by JS) -->
    <video id="m6Video"
          autoplay
          playsinline
          muted
          style="visibility:hidden; width:0; height:0; position:absolute;">
    </video>

      <!-- Hidden capture canvas -->
      <canvas id="m6Canvas" width="640" height="480" style="display:none;"></canvas>

      <!-- Visible processed output -->
      <img id="m6Output"
          class="m6-video"
          src=""
          alt="Tracking output">

      <!-- SAM2 playback controls -->
      <div id="m6_sam2_controls" class="m6-sam2-controls" style="display:none; margin-top: 10px;">
        <button class="btn ghost" data-action="prev">âª Prev</button>
        <button class="btn ghost" data-action="play">â–¶ï¸ Play</button>
        <button class="btn ghost" data-action="next">â© Next</button>
        <button class="btn ghost" data-action="restart">ğŸ” Restart</button>

        <input id="m6_slider" type="range" min="0" max="198" value="0">
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='module6/main.js') }}"></script>
{% endblock %}
